(self.webpackChunkself_service_bicycles=self.webpackChunkself_service_bicycles||[]).push([[177],{5177:(t,e,n)=>{"use strict";n.r(e),n.d(e,{StationDetailModule:()=>x});var i=n(1116),s=n(3058),o=n(9783);let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[i.ez]]}),t})();var r=n(8605),c=n(177),p=n(8976),u=n(4689),l=n(6673);class h{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new f(t,this.compare,this.keySelector))}}class f extends l.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var d=n(9996),v=n(8115);let g=(()=>{class t{constructor(t){this.stationsDatastore=t}getOneStation(t){return this.stationsDatastore.getOneStation(t)}isFavoriteStation(t){return this.stationsDatastore.getFavoriteStations().pipe((0,d.U)(e=>e.includes(t)))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(v.g))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=n(5559),Z=n(7366);let y=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-station-information-sheet"]],inputs:{station:"station"},decls:14,vars:8,template:function(t,e){1&t&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"p"),o._uU(4),o.qZA(),o.TgZ(5,"p"),o._uU(6),o.ALo(7,"formatBoolean"),o.qZA(),o.TgZ(8,"p"),o._uU(9),o.qZA(),o.TgZ(10,"p"),o._uU(11),o.qZA(),o.TgZ(12,"p"),o._uU(13),o.qZA(),o.qZA()),2&t&&(o.xp6(2),o.Oqu(e.station.station_id),o.xp6(2),o.Oqu(e.station.name),o.xp6(2),o.Oqu(o.lcZ(7,6,e.station.is_installed)),o.xp6(3),o.hij("",e.station.num_docks_available," docks"),o.xp6(2),o.hij(" ",e.station.capacity-e.station.num_docks_available," docks out of service "),o.xp6(2),o.Oqu(e.station.updatedAt))},pipes:[Z.W],styles:[""],changeDetection:0}),t})();var k=n(6939);let _=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-loader"]],decls:2,vars:0,template:function(t,e){1&t&&(o.TgZ(0,"p"),o._uU(1,"loader works!"),o.qZA())},styles:[""],changeDetection:0}),t})();const S=function(t){return[t]};function A(t,e){if(1&t){const t=o.EpF();o.ynx(0),o.TgZ(1,"app-favorite-button",4),o.NdJ("click",function(){const e=o.CHM(t).ngIf;return o.oxw().onToggleFavorite(e.station_id)}),o.ALo(2,"async"),o.qZA(),o._UZ(3,"app-station-information-sheet",5),o._UZ(4,"app-maps",6),o.BQk()}if(2&t){const t=e.ngIf,n=o.oxw();let i;o.xp6(1),o.Q6J("isFavorite",null!==(i=o.lcZ(2,3,n.isFavoriteStation$))&&void 0!==i&&i),o.xp6(2),o.Q6J("station",t),o.xp6(1),o.Q6J("stationsToMark",o.VKq(5,S,t))}}function w(t,e){1&t&&o._UZ(0,"app-loader")}const q=[{path:"",component:(()=>{class t{constructor(t,e,n,i){this.router=t,this.route=e,this.stationDetailService=n,this.stationsDatastoreService=i}ngOnInit(){this.station$=this.route.params.pipe((0,u.w)(t=>this.stationDetailService.getOneStation(t.id))),this.isFavoriteStation$=this.station$.pipe((0,u.w)(({station_id:t})=>this.stationDetailService.isFavoriteStation(t)),t=>t.lift(new h(void 0,void 0)))}onToggleFavorite(t){this.stationsDatastoreService.toggleFavoriteStation(t)}back(){this.router.navigate([".."],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(p.F0),o.Y36(p.gz),o.Y36(g),o.Y36(v.g))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-view-station-detail"]],decls:8,vars:4,consts:[[1,"wrapper"],["mat-raised-button","","type","button",3,"click"],[4,"ngIf","ngIfElse"],["loadingBlock",""],[3,"isFavorite","click"],[3,"station"],[3,"stationsToMark"]],template:function(t,e){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div"),o.TgZ(2,"button",1),o.NdJ("click",function(){return e.back()}),o._uU(3,"Back"),o.qZA(),o.YNc(4,A,5,7,"ng-container",2),o.ALo(5,"async"),o.qZA(),o.qZA(),o.YNc(6,w,1,0,"ng-template",null,3,o.W1O)),2&t){const t=o.MAs(7);o.xp6(4),o.Q6J("ngIf",o.lcZ(5,2,e.station$))("ngIfElse",t)}},directives:[i.O5,m.t,y,k.E,_],pipes:[i.Ov],styles:[""],changeDetection:0}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[p.Bz.forChild(q)],p.Bz]}),t})(),x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[i.ez,s.u,c.d,a,r._,T]]}),t})()}}]);