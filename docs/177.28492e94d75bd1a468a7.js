(self.webpackChunkself_service_bicycles=self.webpackChunkself_service_bicycles||[]).push([[177],{5177:(t,e,i)=>{"use strict";i.r(e),i.d(e,{StationDetailModule:()=>w});var n=i(1116),s=i(3058),o=i(9783);let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[n.ez]]}),t})();var r=i(177),c=i(8976),l=i(4689),u=i(6673);class p{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new h(t,this.compare,this.keySelector))}}class h extends u.L{constructor(t,e,i){super(t),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(n){return this.destination.error(n)}let i=!1;if(this.hasKey)try{const{compare:t}=this;i=t(this.key,e)}catch(n){return this.destination.error(n)}else this.hasKey=!0;i||(this.key=e,this.destination.next(t))}}var f=i(9996),d=i(8115);let g=(()=>{class t{constructor(t){this.stationsDatastore=t}getOneStation(t){return this.stationsDatastore.getOneStation(t)}isFavoriteStation(t){return this.stationsDatastore.getFavoriteStations().pipe((0,f.U)(e=>e.includes(t)))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(d.g))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i(5559),m=i(7366);let y=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-station-information-sheet"]],inputs:{station:"station"},decls:14,vars:8,template:function(t,e){1&t&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"p"),o._uU(4),o.qZA(),o.TgZ(5,"p"),o._uU(6),o.ALo(7,"formatBoolean"),o.qZA(),o.TgZ(8,"p"),o._uU(9),o.qZA(),o.TgZ(10,"p"),o._uU(11),o.qZA(),o.TgZ(12,"p"),o._uU(13),o.qZA(),o.qZA()),2&t&&(o.xp6(2),o.Oqu(e.station.station_id),o.xp6(2),o.Oqu(e.station.name),o.xp6(2),o.Oqu(o.lcZ(7,6,e.station.is_installed)),o.xp6(3),o.hij("",e.station.num_docks_available," docks"),o.xp6(2),o.hij(" ",e.station.capacity-e.station.num_docks_available," docks out of service "),o.xp6(2),o.Oqu(e.station.updatedAt))},pipes:[m.W],styles:[""],changeDetection:0}),t})(),Z=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-loader"]],decls:2,vars:0,template:function(t,e){1&t&&(o.TgZ(0,"p"),o._uU(1,"loader works!"),o.qZA())},styles:[""],changeDetection:0}),t})();function k(t,e){if(1&t){const t=o.EpF();o.ynx(0),o.TgZ(1,"app-favorite-button",4),o.NdJ("click",function(){const e=o.CHM(t).ngIf;return o.oxw().onToggleFavorite(e.station_id)}),o.ALo(2,"async"),o.qZA(),o._UZ(3,"app-station-information-sheet",5),o.BQk()}if(2&t){const t=e.ngIf,i=o.oxw();let n;o.xp6(1),o.Q6J("isFavorite",null!==(n=o.lcZ(2,2,i.isFavoriteStation$))&&void 0!==n&&n),o.xp6(2),o.Q6J("station",t)}}function _(t,e){1&t&&o._UZ(0,"app-loader")}const S=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.router=t,this.route=e,this.stationDetailService=i,this.stationsDatastoreService=n}ngOnInit(){this.station$=this.route.params.pipe((0,l.w)(t=>this.stationDetailService.getOneStation(t.id))),this.isFavoriteStation$=this.station$.pipe((0,l.w)(({station_id:t})=>this.stationDetailService.isFavoriteStation(t)),t=>t.lift(new p(void 0,void 0)))}onToggleFavorite(t){this.stationsDatastoreService.toggleFavoriteStation(t)}back(){this.router.navigate([".."],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.F0),o.Y36(c.gz),o.Y36(g),o.Y36(d.g))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-view-station-detail"]],decls:8,vars:4,consts:[[1,"wrapper"],["mat-raised-button","","type","button",3,"click"],[4,"ngIf","ngIfElse"],["loadingBlock",""],[3,"isFavorite","click"],[3,"station"]],template:function(t,e){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div"),o.TgZ(2,"button",1),o.NdJ("click",function(){return e.back()}),o._uU(3,"Back"),o.qZA(),o.YNc(4,k,4,4,"ng-container",2),o.ALo(5,"async"),o.qZA(),o.qZA(),o.YNc(6,_,1,0,"ng-template",null,3,o.W1O)),2&t){const t=o.MAs(7);o.xp6(4),o.Q6J("ngIf",o.lcZ(5,2,e.station$))("ngIfElse",t)}},directives:[n.O5,v.t,y,Z],pipes:[n.Ov],styles:[""],changeDetection:0}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[c.Bz.forChild(S)],c.Bz]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[n.ez,s.u,r.d,a,A]]}),t})()}}]);