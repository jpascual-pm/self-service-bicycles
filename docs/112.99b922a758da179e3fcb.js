(self.webpackChunkself_service_bicycles=self.webpackChunkself_service_bicycles||[]).push([[112],{4112:(t,e,i)=>{"use strict";i.r(e),i.d(e,{StationDetailModule:()=>q});var n=i(1116),a=i(4369),o=i(3058),s=i(3003),r=i(5366);let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[n.ez]]}),t})();var l=i(8605),p=i(4842),u=i(5424),d=i(7570),f=i(4689),g=i(8720),v=i(9996),_=i(8115);let m=(()=>{class t{constructor(t){this.stationsDatastore=t}getOneStation(t){return this.stationsDatastore.getOneStation(t)}isFavoriteStation(t){return this.stationsDatastore.getFavoriteStations().pipe((0,v.U)(e=>e.includes(t)))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(_.g))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=i(3689),h=i(5559),Z=i(946);const k=function(){return["bike-icon"]},y=function(){return["dock-icon"]},O=function(){return["out-of-service-icon"]};let S=(()=>{class t{constructor(){this.numDocksOutOfService=0}ngOnInit(){}ngOnChanges(t){if(t.station){const e=t.station.currentValue;this.numDocksOutOfService=e.capacity-e.num_bikes_available-e.num_docks_available}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-station-information-sheet"]],inputs:{station:"station"},features:[r.TTD],decls:19,vars:14,consts:[[1,"station-detail"],[1,"station-detail__name"],[1,"station-detail__info"],[1,"station-detail__property"],["iconName","pedal_bike","title","Bikes available",3,"classes"],["iconName","bike_scooter","title","Docks available",3,"classes"],["iconName","error","title","Docks out of service",3,"classes"],[1,"station-detail__last-updated-label"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"h1",1),r._uU(2),r.qZA(),r.TgZ(3,"div",2),r.TgZ(4,"p",3),r._UZ(5,"app-icon",4),r.TgZ(6,"span"),r._uU(7),r.qZA(),r.qZA(),r.TgZ(8,"p",3),r._UZ(9,"app-icon",5),r.TgZ(10,"span"),r._uU(11),r.qZA(),r.qZA(),r.TgZ(12,"p",3),r._UZ(13,"app-icon",6),r.TgZ(14,"span"),r._uU(15),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"p",7),r._uU(17),r.ALo(18,"date"),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Oqu(e.station.name),r.xp6(3),r.Q6J("classes",r.DdM(11,k)),r.xp6(2),r.hij("",e.station.num_bikes_available," bikes available"),r.xp6(2),r.Q6J("classes",r.DdM(12,y)),r.xp6(2),r.hij("",e.station.num_docks_available," docks available"),r.xp6(2),r.Q6J("classes",r.DdM(13,O)),r.xp6(2),r.hij("",e.numDocksOutOfService," out of service"),r.xp6(2),r.hij("Last update: ",r.xi3(18,8,e.station.updatedAt,"medium"),""))},directives:[Z.o],pipes:[n.uU],styles:[".station-detail[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column}.station-detail__info[_ngcontent-%COMP%]{align-items:flex-start;display:flex;flex-direction:column}.station-detail__property[_ngcontent-%COMP%]{align-content:center;display:flex;justify-content:center}.station-detail__property[_ngcontent-%COMP%]:last-child{margin:0}"],changeDetection:0}),t})();var x=i(6939);let A=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-loader"]],decls:1,vars:0,template:function(t,e){1&t&&r._uU(0,"...LOADING...\n")},styles:[""],changeDetection:0}),t})();const w=function(t){return[t]};function D(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",3),r.TgZ(2,"button",4),r.NdJ("click",function(){return r.CHM(t),r.oxw().back()}),r._uU(3,"Back"),r.qZA(),r.TgZ(4,"button",5),r.NdJ("click",function(){const e=r.CHM(t).ngIf;return r.oxw().onToggleFavorite(e.station_id)}),r._uU(5," Add to favorite "),r._UZ(6,"app-favorite-button",6),r.ALo(7,"async"),r.qZA(),r.qZA(),r._UZ(8,"app-station-information-sheet",7),r._UZ(9,"app-maps",8),r.BQk()}if(2&t){const t=e.ngIf,i=r.oxw();let n;r.xp6(6),r.Q6J("isFavorite",null!==(n=r.lcZ(7,4,i.isFavoriteStation$))&&void 0!==n&&n),r.xp6(2),r.Q6J("station",t),r.xp6(1),r.Q6J("stationsToMark",r.VKq(6,w,t))("center",i.clientPosition)}}function T(t,e){1&t&&r._UZ(0,"app-loader")}const F=[{path:"",component:(()=>{class t{constructor(t,e,i,n,a){this.router=t,this.route=e,this.stationDetailService=i,this.stationsDatastoreService=n,this.clientPositionService=a,this.subscription=new d.w}ngOnInit(){const t=this.clientPositionService.getClientPosition().subscribe(t=>{this.clientPosition=t});this.subscription.add(t),this.station$=this.getStationObservableFromRouteParam(),this.isFavoriteStation$=this.getIsFavoriteStationObservable()}ngOnDestroy(){this.subscription.unsubscribe()}getStationObservableFromRouteParam(){return this.route.params.pipe((0,f.w)(t=>this.stationDetailService.getOneStation(t.id)))}getIsFavoriteStationObservable(){return this.station$.pipe((0,f.w)(({station_id:t})=>this.stationDetailService.isFavoriteStation(t)),(0,g.x)())}onToggleFavorite(t){this.stationsDatastoreService.toggleFavoriteStation(t)}back(){this.router.navigate([".."],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(u.F0),r.Y36(u.gz),r.Y36(m),r.Y36(_.g),r.Y36(b.V))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-view-station-detail"]],decls:5,vars:4,consts:[[1,"station-detail-wrapper"],[4,"ngIf","ngIfElse"],["loadingBlock",""],[1,"station-detail-wrapper__header"],["mat-raised-button","","type","button",3,"click"],["mat-button","","type","button",1,"station-detail-wrapper__favorite-block",3,"click"],[3,"isFavorite"],[3,"station"],[3,"stationsToMark","center"]],template:function(t,e){if(1&t&&(r.TgZ(0,"div",0),r.YNc(1,D,10,8,"ng-container",1),r.ALo(2,"async"),r.qZA(),r.YNc(3,T,1,0,"ng-template",null,2,r.W1O)),2&t){const t=r.MAs(4);r.xp6(1),r.Q6J("ngIf",r.lcZ(2,2,e.station$))("ngIfElse",t)}},directives:[n.O5,a.lW,h.t,S,x.E,A],pipes:[n.Ov],styles:[".station-detail-wrapper__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.station-detail-wrapper__favorite-block[_ngcontent-%COMP%]{align-items:center;cursor:pointer;display:flex;justify-content:center}"],changeDetection:0}),t})()}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[u.Bz.forChild(F)],u.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[n.ez,o.u,p.g,s.Q,c,l._,a.ot,U]]}),t})()}}]);