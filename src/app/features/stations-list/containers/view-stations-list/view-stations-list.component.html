<app-stations-filters
  (filterChanges)="onFilterChanges($event)"
></app-stations-filters>

<mat-tab-group mat-align-tabs="center" class="remove-border-bottom">
  <mat-tab label="List">
    <ng-container *ngTemplateOutlet="listTemplate"> </ng-container>
  </mat-tab>

  <mat-tab label="Map">
    <ng-container *ngTemplateOutlet="mapsTemplate"> </ng-container>
  </mat-tab>
</mat-tab-group>

<ng-template #mapsTemplate>
  <div *ngIf="allStations$ | async as allStations" class="maps-wrapper">
    <app-maps [stationsToMark]="allStations"></app-maps>
  </div>
</ng-template>

<ng-template #listTemplate>
  <div class="stations-list-wrapper">
    <div *ngIf="stations$ | async as stations">
      <ng-container *ngIf="stations.favorite.length > 0">
        <h2 class="list-title">
          Favorite stations ({{ stations.favorite.length }})
        </h2>
        <app-stations-display
          *ngFor="
            let favoriteStation of stations.favorite;
            trackBy: trackStationById
          "
          [station]="favoriteStation"
          [isFavorite]="true"
          (toggleFavorite)="onToggleFavorite(favoriteStation.station_id)"
          (stationClick)="onStationClick(favoriteStation.station_id)"
          class="stations-display"
        ></app-stations-display>
      </ng-container>

      <ng-container *ngIf="stations.standard.length > 0">
        <h2 class="list-title">Stations ({{ stations.standard.length }})</h2>
        <app-stations-display
          *ngFor="
            let standardStation of stations.standard;
            trackBy: trackStationById
          "
          [station]="standardStation"
          [isFavorite]="false"
          (toggleFavorite)="onToggleFavorite(standardStation.station_id)"
          (stationClick)="onStationClick(standardStation.station_id)"
          class="stations-display"
        ></app-stations-display>
      </ng-container>
    </div>
  </div>
</ng-template>
